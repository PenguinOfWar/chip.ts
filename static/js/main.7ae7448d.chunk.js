(this["webpackJsonpchip.ts"]=this["webpackJsonpchip.ts"]||[]).push([[0],{43:function(t,e,n){},45:function(t,e,n){},46:function(t,e,n){"use strict";n.r(e);var s=n(2),i=n.n(s),c=n(15),r=n.n(c),o=n(6),a=n.n(o),u=n(16),l=n(19),h=n(17),f=n(18),v=n.n(f),p=n(3),b=n(4),d=function(){function t(e){Object(p.a)(this,t),this.memory=new Uint8Array(new ArrayBuffer(4096)),this.registers=new Uint8Array(16),this.stack=new Uint16Array(16),this.stackPointer=0,this.counter=512,this.load(e)}return Object(b.a)(t,[{key:"load",value:function(t){var e=this;t.map((function(t,n){var s=n+512;return e.memory[s]=t,t}))}},{key:"tick",value:function(){var t=this.memory[this.counter]<<8|this.memory[this.counter+1],e=(3840&t)>>8,n=(240&t)>>4;switch(27138===t&&(console.log(27138,3840&t,e),console.log(27138,240&t,n)),this.counter+=2,61440&t){case 0:switch(t){case 224:console.log("Render clear");break;case 238:console.log("Return from subroutine")}break;case 24576:console.log("Setting VX to NN",e,255&t),this.registers[e]=255&t}}}]),t}(),m=function(){function t(e){Object(p.a)(this,t),this.canvas=null,this.context=null,this.resolution={x:64,y:32,scale:8},this.screen=new Uint8Array(this.resolution.x*this.resolution.y),this.canvas=e.current,this.boot()}return Object(b.a)(t,[{key:"boot",value:function(){this.context=this.canvas.getContext("2d"),this.canvas.width=this.resolution.x*this.resolution.scale,this.canvas.height=this.resolution.y*this.resolution.scale,this.disp_clear()}},{key:"disp_clear",value:function(){var t;(null===(t=this.context)||void 0===t?void 0:t.clearRect)&&this.context.clearRect(0,0,this.resolution.x*this.resolution.scale,this.resolution.y*this.resolution.scale)}},{key:"paint",value:function(){var t=this;if(this.disp_clear(),this.context){var e=this.context,n=this.resolution;this.screen.map((function(s,i){var c=i%n.x*n.scale,r=Math.floor(i/n.x)*n.scale;return e.fillStyle=["#000","#00ff00"][s],e.fillRect(c,r,t.resolution.scale,t.resolution.scale),s}))}}}]),t}(),y=function(){function t(e,n){Object(p.a)(this,t),this.fps=60,this.frame=0,this.start(new d(e),new m(n))}return Object(b.a)(t,[{key:"start",value:function(t,e){var n=this,s=performance.now(),i=1e3/this.fps;e.paint(),this.frame=requestAnimationFrame((function e(c){n.frame=requestAnimationFrame(e);var r=c-s;r>=i-.1&&(s=c-r%i,t.tick())}))}},{key:"stop",value:function(){cancelAnimationFrame(this.frame)}}]),t}(),j=(n(43),n(1));var x=function(){var t=Object(s.useState)(!1),e=Object(l.a)(t,2),n=e[0],i=e[1],c=Object(s.useRef)(null);return Object(s.useEffect)((function(){function t(){return(t=Object(u.a)(a.a.mark((function t(){var e,n,s,r,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),t.next=3,v()({url:"".concat("/chip.ts","/roms/pong"),method:"GET",responseType:"blob"});case 3:return e=t.sent,n=new Blob([e.data]),t.next=7,n.arrayBuffer();case 7:s=t.sent,r=new Uint8Array(s),o=new y(r,c),console.log(o);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}n||Object(h.a)()&&c&&(null===c||void 0===c?void 0:c.current)&&function(){t.apply(this,arguments)}()}),[n,c]),Object(j.jsx)("div",{className:"container app",children:Object(j.jsx)("div",{className:"row",children:Object(j.jsxs)("div",{className:"col-12",children:[Object(j.jsx)("h1",{children:"CHIP.ts"}),Object(j.jsx)("canvas",{"data-testid":"canvas",ref:c})]})})})},w=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,47)).then((function(e){var n=e.getCLS,s=e.getFID,i=e.getFCP,c=e.getLCP,r=e.getTTFB;n(t),s(t),i(t),c(t),r(t)}))};n(45);r.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(x,{})}),document.getElementById("root")),w()}},[[46,1,2]]]);
//# sourceMappingURL=main.7ae7448d.chunk.js.map